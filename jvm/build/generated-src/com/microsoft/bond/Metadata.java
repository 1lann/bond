
//------------------------------------------------------------------------------
// This code was generated by a tool.
//
//   Tool : Bond Compiler 0.8.0.0
//   Input filename:  ../idl/bond/core/bond.bond
//   Output filename: Metadata.java
//
// Changes to this file may cause incorrect behavior and will be lost when
// the code is regenerated.
// <auto-generated />
//------------------------------------------------------------------------------

package com.microsoft.bond;


@javax.annotation.Generated("gbc")
public class Metadata implements com.microsoft.bond.BondSerializable {

    public static final com.microsoft.bond.SchemaDef SCHEMA = new com.microsoft.bond.SchemaDef();
    public static final com.microsoft.bond.StructDef STRUCT_DEF = new com.microsoft.bond.StructDef();
    private static final com.microsoft.bond.FieldDef name_FIELD_DEF = new com.microsoft.bond.FieldDef();
    private static final com.microsoft.bond.FieldDef qualified_name_FIELD_DEF = new com.microsoft.bond.FieldDef();
    private static final com.microsoft.bond.FieldDef attributes_FIELD_DEF = new com.microsoft.bond.FieldDef();
    private static final com.microsoft.bond.FieldDef modifier_FIELD_DEF = new com.microsoft.bond.FieldDef();
    private static final com.microsoft.bond.FieldDef default_value_FIELD_DEF = new com.microsoft.bond.FieldDef();
    private static boolean schemaInitialized = false;

    public static synchronized void initSchema() {
        if (schemaInitialized) { return; }

        SCHEMA.root.id = com.microsoft.bond.BondDataType.BT_STRUCT;
        SCHEMA.root.struct_def = 0;
        SCHEMA.root.element = null;
        SCHEMA.root.key = null;
        SCHEMA.root.bonded_type = false;

        STRUCT_DEF.metadata.name = "Metadata";
        STRUCT_DEF.metadata.qualified_name = "com.microsoft.bond.Metadata";
        STRUCT_DEF.metadata.modifier = com.microsoft.bond.Modifier.Optional;
        
        // TODO: .base_def
        SCHEMA.structs.add(0, STRUCT_DEF);

        name_FIELD_DEF.metadata.name = "name";
        name_FIELD_DEF.metadata.qualified_name = "";
        // TODO: .metadata.qualifier
        
        name_FIELD_DEF.id = 0;
        name_FIELD_DEF.type.id = com.microsoft.bond.BondDataType.BT_STRING;
        name_FIELD_DEF.type.struct_def = 0;
        name_FIELD_DEF.type.element = null;
        name_FIELD_DEF.type.key = null;
        name_FIELD_DEF.type.bonded_type = false;
        STRUCT_DEF.fields.add(name_FIELD_DEF);

        qualified_name_FIELD_DEF.metadata.name = "qualified_name";
        qualified_name_FIELD_DEF.metadata.qualified_name = "";
        // TODO: .metadata.qualifier
        
        qualified_name_FIELD_DEF.id = 1;
        qualified_name_FIELD_DEF.type.id = com.microsoft.bond.BondDataType.BT_STRING;
        qualified_name_FIELD_DEF.type.struct_def = 0;
        qualified_name_FIELD_DEF.type.element = null;
        qualified_name_FIELD_DEF.type.key = null;
        qualified_name_FIELD_DEF.type.bonded_type = false;
        STRUCT_DEF.fields.add(qualified_name_FIELD_DEF);

        attributes_FIELD_DEF.metadata.name = "attributes";
        attributes_FIELD_DEF.metadata.qualified_name = "";
        // TODO: .metadata.qualifier
        
        attributes_FIELD_DEF.id = 2;
        attributes_FIELD_DEF.type.id = com.microsoft.bond.BondDataType.BT_MAP;
        attributes_FIELD_DEF.type.struct_def = 0;
        attributes_FIELD_DEF.type.element = new com.microsoft.bond.TypeDef();
        attributes_FIELD_DEF.type.element.id = com.microsoft.bond.BondDataType.BT_STRING;
        attributes_FIELD_DEF.type.element.struct_def = 0;
        attributes_FIELD_DEF.type.element.element = null;
        attributes_FIELD_DEF.type.element.key = null;
        attributes_FIELD_DEF.type.element.bonded_type = false;
        attributes_FIELD_DEF.type.key = new com.microsoft.bond.TypeDef();
        attributes_FIELD_DEF.type.key.id = com.microsoft.bond.BondDataType.BT_STRING;
        attributes_FIELD_DEF.type.key.struct_def = 0;
        attributes_FIELD_DEF.type.key.element = null;
        attributes_FIELD_DEF.type.key.key = null;
        attributes_FIELD_DEF.type.key.bonded_type = false;
        attributes_FIELD_DEF.type.bonded_type = false;
        STRUCT_DEF.fields.add(attributes_FIELD_DEF);

        modifier_FIELD_DEF.metadata.name = "modifier";
        modifier_FIELD_DEF.metadata.qualified_name = "";
        // TODO: .metadata.qualifier
        
        modifier_FIELD_DEF.id = 3;
        modifier_FIELD_DEF.type.id = com.microsoft.bond.BondDataType.BT_INT32;
        modifier_FIELD_DEF.type.struct_def = 0;
        modifier_FIELD_DEF.type.element = null;
        modifier_FIELD_DEF.type.key = null;
        modifier_FIELD_DEF.type.bonded_type = false;
        STRUCT_DEF.fields.add(modifier_FIELD_DEF);

        default_value_FIELD_DEF.metadata.name = "default_value";
        default_value_FIELD_DEF.metadata.qualified_name = "";
        // TODO: .metadata.qualifier
        
        default_value_FIELD_DEF.id = 4;
        default_value_FIELD_DEF.type.id = com.microsoft.bond.BondDataType.BT_STRUCT;
        try {
            Class<com.microsoft.bond.Variant> VariantStructClass = com.microsoft.bond.Variant.class;
            com.microsoft.bond.StructDef VariantStructDef = (com.microsoft.bond.StructDef) (VariantStructClass.getDeclaredField("STRUCT_DEF").get(null));
            default_value_FIELD_DEF.type.struct_def = com.microsoft.bond.schema.SchemaUtils.add(SCHEMA, VariantStructDef, VariantStructClass);
        } catch (NoSuchFieldException nsfe) {
            throw new RuntimeException(nsfe);
        } catch (IllegalAccessException iae) {
            throw new RuntimeException(iae);
        }
        // TODO: .type.element
        // TODO: .type.key
        default_value_FIELD_DEF.type.bonded_type = false;
        STRUCT_DEF.fields.add(default_value_FIELD_DEF);

        schemaInitialized = true;
    }

    public static com.microsoft.bond.SchemaDef getSchema() {
        initSchema();
        return SCHEMA;
    }

    public static com.microsoft.bond.StructDef getStructDef() {
        initSchema();
        return STRUCT_DEF;
    }
    

    private final com.microsoft.bond.protocol.TaggedProtocolReader.ReadFieldResult __readFieldResult = new com.microsoft.bond.protocol.TaggedProtocolReader.ReadFieldResult();
    private final com.microsoft.bond.protocol.TaggedProtocolReader.ReadContainerResult __readContainerResult = new com.microsoft.bond.protocol.TaggedProtocolReader.ReadContainerResult();

    public String name = "";

    public String qualified_name = "";

    public java.util.Map<String, String> attributes = new java.util.HashMap();

    public Modifier modifier = Modifier.Optional;

    public Variant default_value = new Variant();

    @Override
    public void serialize(com.microsoft.bond.protocol.ProtocolWriter writer) throws java.io.IOException {
        initSchema();

        writer.writeStructBegin(SCHEMA.structs.get(0).metadata);
        
        writer.writeFieldBegin(com.microsoft.bond.BondDataType.BT_STRING, 0, name_FIELD_DEF.metadata);
        writer.writeString(this.name);
        writer.writeFieldEnd();
        
        writer.writeFieldBegin(com.microsoft.bond.BondDataType.BT_STRING, 1, qualified_name_FIELD_DEF.metadata);
        writer.writeString(this.qualified_name);
        writer.writeFieldEnd();
        
        writer.writeFieldBegin(com.microsoft.bond.BondDataType.BT_MAP, 2, attributes_FIELD_DEF.metadata);
        writer.writeContainerBegin(this.attributes.size(), com.microsoft.bond.BondDataType.BT_STRING, com.microsoft.bond.BondDataType.BT_STRING);
        for (java.util.Map.Entry<String, String> e0 : this.attributes.entrySet()) {
            writer.writeString(e0.getKey());
            writer.writeString(e0.getValue());
        }
        writer.writeContainerEnd();
        writer.writeFieldEnd();
        
        writer.writeFieldBegin(com.microsoft.bond.BondDataType.BT_INT32, 3, modifier_FIELD_DEF.metadata);
        writer.writeInt32(this.modifier.value);
        writer.writeFieldEnd();
        
        writer.writeFieldBegin(com.microsoft.bond.BondDataType.BT_STRUCT, 4, default_value_FIELD_DEF.metadata);
        this.default_value.serialize(writer);
        writer.writeFieldEnd();
        
        writer.writeStructEnd();
    }

    @Override
    public void deserialize(com.microsoft.bond.protocol.TaggedProtocolReader reader) throws java.io.IOException {
        initSchema();

        reader.readStructBegin();
        
        reader.readFieldBegin(this.__readFieldResult);
        this.name = reader.readString();
        reader.readFieldEnd();
        
        reader.readFieldBegin(this.__readFieldResult);
        this.qualified_name = reader.readString();
        reader.readFieldEnd();
        
        reader.readFieldBegin(this.__readFieldResult);
        reader.readMapBegin(__readContainerResult);
        {
            long count0 = __readContainerResult.count;
            for (long i0 = 0; i0 < count0; i0++) {
                String k0;
                String v0;
                k0 = reader.readString();
                v0 = reader.readString();
                this.attributes.put(k0, v0);
            }
        }
        reader.readContainerEnd();
        reader.readFieldEnd();
        
        reader.readFieldBegin(this.__readFieldResult);
        this.modifier = new Modifier(reader.readInt32());
        reader.readFieldEnd();
        
        reader.readFieldBegin(this.__readFieldResult);
        this.default_value = new Variant(); this.default_value.deserialize(reader);
        reader.readFieldEnd();
        
        reader.readStructEnd();
    }

    @Override
    public void marshal(com.microsoft.bond.protocol.ProtocolWriter writer) throws java.io.IOException {
        writer.writeVersion();
        serialize(writer);
    }
}
