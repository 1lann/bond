<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; }
code > span.dt { color: #204a87; }
code > span.dv { color: #0000cf; }
code > span.bn { color: #0000cf; }
code > span.fl { color: #0000cf; }
code > span.ch { color: #4e9a06; }
code > span.st { color: #4e9a06; }
code > span.co { color: #8f5902; font-style: italic; }
code > span.ot { color: #8f5902; }
code > span.al { color: #ef2929; }
code > span.fu { color: #000000; }
code > span.er { font-weight: bold; }
  body {
      line-height: 1.5; 
      font-family: Helvetica, Arial, sans-serif; 
      color: #333333;
      font-size: 0.9em;
  }
  code {
      font-size: 1em;
  }
  td.lineNumbers { width: 40px; }
  div#all {
    width: 1120px;
    background-color: #ffffff;
    margin: 0 auto;
    padding: 25px;
    overflow: auto;
  }
  code > span.co { color: #4E9A06; font-style: normal; }
  code > span.st { color: #8A0303; font-style: normal; }

  h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
    border-bottom: 1px solid black;
  }

  #toc {
    width: 300px; 
    position:fixed;
    overflow: auto;
    height: 100%;
  }

  #main {
    margin-left: auto;
    margin-right: auto;
    width: 800px;
  }
  a {
    text-decoration: none;
  }
  #toc a:visited {
    color: #99c;
  }
  #main a:visited {
    color: #36c;
  }
  a:link {
    color: #36c;
  }
  </style>
</head>
<body>
<nav id="TOC"></nav>
<div id="all">
<div id="main">
<h1 id="bond">Bond</h1>
<p>Bond is an open source, cross-platform framework for working with schematized data. It supports cross-language serialization/deserialization and powerful generic mechanisms for efficiently manipulating data. Bond is broadly used at Microsoft in high scale services.</p>
<p>Bond is published on GitHub at <a href="https://github.com/Microsoft/bond/">https://github.com/Microsoft/bond/</a>.</p>
<p>For details, see the User’s Manuals for <a href="http://Microsoft.github.io/bond/manual/bond_cpp.html">C++</a>, <a href="http://Microsoft.github.io/bond/manual/bond_cs.html">C#</a> and <a href="http://Microsoft.github.io/bond/manual/bond_py.html">Python</a>.</p>
<h2 id="dependencies">Dependencies</h2>
<p>The Bond repository uses Git submodules and should be cloned with the <code>--recursive</code> flag:</p>
<pre class="sourceCode python"><code class="sourceCode python">git clone --recursive https://github.com/Microsoft/bond.git</code></pre>
<p>In order to build Bond you will need CMake (2.8.12+), Haskell (ghc 7.4+ and cabal-install 1.20+) and Boost (1.54+). The core Bond C++ library can be used with C++03 compilers, although Python support, unit tests and various examples require some C++11 features.</p>
<p>Following are specific instructions for building on various platforms.</p>
<h3 id="linux">Linux</h3>
<p>Bond can be built with Clang (3.4+) or GNU C++ (4.7+). We recommend the latest version of Clang as it’s much faster with template-heavy code like Bond.</p>
<p>Run the following commands to install the minimal set of packages needed to build the core Bond library on Ubuntu 14.04:</p>
<pre class="sourceCode python"><code class="sourceCode python">sudo apt-get install \
    clang \
    cmake \
    zlib1g-dev \
    ghc \
    cabal-install \
    libboost-dev \
    libboost-thread-dev

cabal update
cabal install cabal-install</code></pre>
<p>In the root <code>bond</code> directory run:</p>
<pre class="sourceCode python"><code class="sourceCode python">mkdir build
cd build
cmake ..
make
sudo make install</code></pre>
<p>The <code>build</code> directory is just an example. Any directory can be used for build destination.</p>
<p>In order to build all the C++ and Python tests and examples, a few more packages are needed:</p>
<pre class="sourceCode python"><code class="sourceCode python">sudo apt-get install \
    python2<span class="fl">.7</span>-dev \
    libboost-date-time-dev \
    libboost-test-dev \
    libboost-python-dev</code></pre>
<p>Running the following command in the build directory will build and execute all the tests and examples:</p>
<pre class="sourceCode python"><code class="sourceCode python">make --jobs <span class="dv">8</span> check</code></pre>
<p>(unit tests are large so you may want to run 4-8 build jobs in parallel, assuming you have enough memory)</p>
<h3 id="os-x">OS X</h3>
<ul>
<li>Install XCode 6.1</li>
<li>Install CMake (<a href="http://www.cmake.org/download/">http://www.cmake.org/download/</a>)</li>
<li>Install Haskell Platform (<a href="http://haskell.org/platform/">http://haskell.org/platform/</a>)</li>
</ul>
<p>Update cabal to the latest version:</p>
<pre class="sourceCode python"><code class="sourceCode python">cabal update
cabal install cabal-install</code></pre>
<p>Install Boost using Homebrew (<a href="http://brew.sh/">http://brew.sh/</a>):</p>
<pre class="sourceCode python"><code class="sourceCode python">brew install boost boost-python</code></pre>
<p>(boost-python is optional and only needed for Python support)</p>
<p>Bond can be built on OS X using either standard *nix makefiles or XCode. In order to generate and build makefiles, in the root <code>bond</code> directory run:</p>
<pre class="sourceCode python"><code class="sourceCode python">mkdir build
cd build
cmake ..
make
sudo make install</code></pre>
<p>Alternatively you can use the CMake application to generate either *nix makefiles or XCode project into a directory of your choice (it doesn’t have to be called <code>build</code>).</p>
<p>You can build and run unit tests by building the <code>check</code> target in XCode or by running make in the build directory:</p>
<pre class="sourceCode python"><code class="sourceCode python">make --jobs <span class="dv">8</span> check</code></pre>
<h3 id="windows">Windows</h3>
<ul>
<li>Install Visual Studio 2013</li>
<li>Install CMake (<a href="http://www.cmake.org/download/">http://www.cmake.org/download/</a>)</li>
<li>Install Haskell Platform (<a href="http://haskell.org/platform/">http://haskell.org/platform/</a>)</li>
</ul>
<p>Update cabal to the latest version (if behind a proxy, set environment variable <code>HTTP_PROXY=http://proxy:port</code> before running cabal):</p>
<pre class="sourceCode python"><code class="sourceCode python">cabal update
cabal install cabal-install</code></pre>
<p>Now you are ready to build the C# version of Bond. Open the solution file <code>cs\cs.sln</code> in Visual Studio 2013 and build as usual. The C# unit tests can also be run from with the solution.</p>
<p>The C++ and Python versions of Bond additionally require:</p>
<ul>
<li>Boost 1.54+ (<a href="http://www.boost.org/users/download/">http://www.boost.org/users/download/</a>)</li>
<li>Python 2.7 (<a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>)</li>
</ul>
<p>You may need to set the environment variables <code>BOOST_ROOT</code> and <code>BOOST_LIBRARYDIR</code> to specify where Boost and its pre-built libraries for your environment can be found. The core Bond library and most examples only require Boost headers. The pre-built libraries are only needed for unit tests and Python support. If Boost or Python libraries are not found on the system then some tests and examples will not be built.</p>
<p>In order to configure C++/Python project run <code>cmake-gui</code>, select the root of this repository as the source code directory and some other directory as the target for generated project files and build binaries. Now press Generate and select desired target build environment. This configuration step has to be performed only once. From now on you can use the generated solution <code>bond.sln</code>.</p>
<p>IMPORTANT: Bond unit tests are very large. If you are building using the Visual Studio toolchain you have to select 64-bit tools by setting the following environment variable:</p>
<p>For Visual Studio 2012:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">set</span> _IsNativeEnvironment=true</code></pre>
<p>For Visual Studio 2013:</p>
<pre class="sourceCode python"><code class="sourceCode python"><span class="dt">set</span> PreferredToolArchitecture=x64</code></pre>
<p>In order to run unit tests on the Debug build, execute the following command in the build directory:</p>
<pre class="sourceCode python"><code class="sourceCode python">ctest -C Debug</code></pre>
</div>    
</div>
</body>
</html>
